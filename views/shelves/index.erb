<% unless shelves.exists? %>
  <div class="notification has-text-centered">
    You don't have any shelves in your library yet.
  </div>
<% else %>
  <table class="table is-striped is-hoverable is-fullwidth">
    <thead>
      <tr>
        <th> Shelf </th>
        <th> </th>
      </tr>
    </thead>
    <tbody>
      <% shelves.each do |shelf| %>
        <tr>
          <td>
            <%=h shelf.name %>
          </td>
          <td>
            <% if can? :edit, shelf %>
              <a class="button is-small is-pulled-right" href="/users/<%= user.slug %>/shelves/<%= shelf.id %>/edit">Edit</a>
            <% end %>
            <% unless shelf.first? || !can?(:edit, shelf) %>
              <form action="/users/<%= user.slug %>/shelves/<%=shelf.id %>/up" class="is-pulled-right" method="POST">
                <input type=hidden name=authenticity_token value="<%= env['rack.session'][:csrf] %>">
                <button class="button is-small">â†‘</button>
              </form>
            <% end %>
            <% unless shelf.last? || !can?(:edit, shelf) %>
              <form action="/users/<%= user.slug %>/shelves/<%=shelf.id %>/down" class="is-pulled-right" method="POST">
                <input type=hidden name=authenticity_token value="<%= env['rack.session'][:csrf] %>">
                <button class="button is-small">â†“</button>
              </form>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<% if can? :create, user.shelves.new %>
  <div class="content">
    <form action="/users/<%= user.slug %>/shelves" method="POST">
      <input type=hidden name=authenticity_token value="<%= env['rack.session'][:csrf] %>">

      <div class="field has-addons">
        <div class="control is-expanded">
          <input class="input" type="text" name="name" placeholder="Shelf name..." required>
        </div>
        <div class="control">
          <button class="button">New Shelf ðŸ“š</button>
        </div>
      </div>
    </form>
  </div>
<% end %>
