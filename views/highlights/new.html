<h2 class="title">
  <a href="/users/{{ .user.Slug }}/books/{{ .book.isbn }}">
    {{ .book.title }}
  </a>
</h2>


<form action="/users/{{ .user.Slug }}/books/{{ .book.isbn }}/highlights/{{ if .highlight.persisted }}{{ .highlight.id }}{{ end }}" method="POST" enctype="multipart/form-data">
  <input type="hidden" name="authenticity_token" value="{{ .csrf }}">

  <div class="field">
    <label class="label">Page</label>
    <div class="control">
      <input
          class="input {{ if include .highlight.errors "page" }}is-danger{{ end }}"
          type="number"
          name="page"
          value="{{ .highlight.page }}">
      {{ if include .highlight.errors "page" }}
        <p class="help is-danger">{{ call .highlight.errors.full_messages_for "page" }}</p>
      {{ end }}
    </div>
  </div>

  <div class="field">
    <label class="label">Content</label>
    <div class="control">
      <textarea
          class="textarea {{ if include .highlight.errors "content" }}is-danger{{ end }}"
          name="content">{{ .highlight.content }}</textarea>
      {{ if include .highlight.errors "content" }}
      <p class="help is-danger">{{ call .highlight.errors.full_messages_for "content" }}</p>
      {{ end }}
    </div>
  </div>

  <div class="field is-grouped">
    <div class="control">
      <button class="button is-link">Save</button>
    </div>
  </div>
</form>

{{ if .highlight.persisted }}
  <form action="/users/{{ .user.Slug }}/books/{{ .book.isbn }}/highlights/{{ .highlight.id }}" method="POST" class="has-text-right">
    <input type="hidden" name="_method" value="DELETE">
    <input type=hidden name=authenticity_token value="{{ .csrf }}">
    <button class="button is-danger">Delete!</button>
  </form>
{{ end }}
